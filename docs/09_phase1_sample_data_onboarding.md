# Phase1：サンプルデータ読み込みとオンボーディング改善（短期）

## ① 現状診断
- アプリ起動後に「サンプルデータ読み込み中」のメッセージが長時間表示されたままで、ダッシュボードが機能しない。
- チャンネルごとのボタンを押してもファイルアップロードUIしか表示されず、事前に用意されたサンプルデータが存在しない。
- 店舗・期間・チャネルなどフィルタの選択肢が初期状態で空のまま大量に並ぶため、初見ユーザーは操作順序を判断しづらい。
- トップに埋め込まれている「ダッシュボードの概要」動画が再生できず、導線として機能していない。

## ② 課題抽出
- 想定ジャーニーは「①データ投入 → ②フィルタ設定 → ③分析閲覧」だが、初手のデータ投入段階で詰まるため以降の体験に辿り着けない。
- 初期状態に売上データが存在しないため、チャネル・カテゴリなどのフィルタが空欄となり、不要なUIが視界を占有して認知負荷が高い。
- 動画リンク切れなど細部の品質劣化が、プロダクト全体の信頼感を損ねている。

## ③ 改善提案
1. **データ取り込みのガイド化**
   - サイドバー上部に「はじめに」セクションを設置し、「①サンプルデータを読み込む / 自社データをアップロード → ②フィルタ設定 → ③ダッシュボード閲覧」を明示したウィザードを表示。
   - 各ステップに補足説明や所要時間目安を示すことで、迷わず操作できる状態を作る。
2. **サンプルデータの即時読み込み**
   - 初回アクセス時に数千行規模のサンプルデータを自動ロードし、`st.cache_data`でキャッシュ。
   - ロード中は`st.spinner`で進行状況を表示し、完了後にチャネル・カテゴリ選択肢を動的に更新する。
3. **無効UIの非表示 / グレーアウト**
   - データ未投入時はフィルタやグラフ領域を非表示もしくはグレーアウトし、ツールチップで「データを読み込んでください」と案内。
   - 有効化タイミングが明示されるため、認知負荷を抑えられる。
4. **動画の代替案**
   - 動画が再生できない場合は1分程度で全体像を把握できるテキストチュートリアルやGIFに差し替える。
   - 主要タスクのスクリーンショットと吹き出しコメントを添え、理解のハードルを下げる。

## ④ 実装イメージ（Streamlit断片）
```python
import streamlit as st
import pandas as pd

st.sidebar.title("はじめに")

# ステップ1：サンプルデータ読み込み
if st.sidebar.button("サンプルデータを読み込む"):
    with st.spinner("サンプルデータ読込み中…"):
        sample = pd.read_csv("sample_sales.csv")
        st.session_state["df"] = sample

# ステップ2：フィルタ設定（データがある場合のみ）
if "df" in st.session_state:
    df = st.session_state["df"]
    channels = df["チャネル"].unique()
    selected_channel = st.sidebar.selectbox("チャネルを選択", options=channels)
    # TODO: 期間・カテゴリなど追加フィルタ
else:
    st.sidebar.info("まずはサンプルデータを読み込むか、自社データをアップロードしてください。")

# メイン画面：データがある場合のみグラフ描画
if "df" in st.session_state:
    st.subheader("売上推移")
    # TODO: Altairなどで可視化
else:
    st.warning("データが見つかりません。サイドバーからデータを読み込んでください。")
```

- ステップボタンはラジオボタンやプログレスインジケータと組み合わせ、完了状態を視覚的に示す。
- `sample_sales.csv`は最小構成のチャネル・カテゴリ列を持つデモデータを用意し、ユーザーが即座にフィルタ挙動を確認できるようにする。
- GIF/テキストガイドは`st.expander`に格納し、必要なユーザーのみが展開できるようにすると情報過多を防げる。
